{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const perPage = 15;\n\nexport async function getImagesByQuery(query, page) {\n  const myApiKey = \"39362168-c2a5e7696671cec7e0c5dcb17\";\n  const BASE_URL = \"https://pixabay.com/api/\";\n  \n  const params = new URLSearchParams({\n    key: myApiKey,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  })\n  try {\n    const response = await axios.get(BASE_URL, { params })\n    return response.data;\n  } catch(error) {\n    (error => error.message)\n  }\n  \n};\n\n\n","import \"simplelightbox/dist/simple-lightbox.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"/css/new-lightbox.css\";\n\nconst list = document.querySelector(\".gallery\"); \nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".loadmore-btn\");\n\n\nconst ligthBox = new SimpleLightbox(\".gallery li a\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,\n    captionPosition: \"bottom\",\n    overlayOpacity: 0.8,\n    overlay: true\n  });\n\n  ligthBox.on('show.simplelightbox', function () {\n  });\n\n\nexport function createGallery(images) {\n  \n  const markup = images\n    .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n      `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n          />\n          <ul class=\"gallery-info-list\">\n            <li class=\"gallery-list-item\">Likes\n              <p class=\"gallery-item-title\">${likes}</p>\n            </li>\n            <li class=\"gallery-list-item\">Views\n              <p class=\"gallery-item-title\">${views}</p>\n            </li>\n            <li class=\"gallery-list-item\">Comments\n              <p class=\"gallery-item-title\">${comments}</p>\n            </li>\n            <li class=\"gallery-list-item\">Downloads\n              <p class=\"gallery-item-title\">${downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`\n    )\n    .join(\"\")\n\n  list.insertAdjacentHTML(\"beforeend\", markup);\n  \n  ligthBox.refresh();\n}\n\nexport function clearGallery() {\n  list.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"js-hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"js-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"js-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMore.classList.add(\"js-hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n  createGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from \"./js/render-functions\";\nimport { perPage } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\".form\");\nconst loadMore = document.querySelector(\".loadmore-btn\");\n\nlet inputValue;\nlet page = 0;\nlet totalPages = 0;\n\nform.addEventListener(\"submit\", async e => {\n  page = 1;\n  e.preventDefault();\n  inputValue = e.target.elements.search.value.trim();\n  if (inputValue.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter your request',\n    }); \n    return\n  }\n  clearGallery();\n\n  try {\n    const data = await getImagesByQuery(inputValue, page);\n    if (data.hits.length === 0) {\n      throw new Error(\"Error\");\n    }\n    createGallery(data.hits);\n    totalPages = Math.ceil(data.totalHits / perPage);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    })\n  }\n  showLoadMoreButton()\n  page += 1;\n  e.target.reset()\n})\n\nloadMore.addEventListener(\"click\", async e => {\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(inputValue, page);\n    \n    if (page === totalPages) {\n      hideLoadMoreButton();\n      throw new Error(\"Error\");\n    }\n\n    createGallery(data.hits);\n    const card = document.querySelector(\".gallery-item\"); \n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\"\n    })\n    showLoadMoreButton();\n    showLoader();\n\n  } catch (error) {\n    \n    iziToast.error({\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    })\n  }\n  hideLoader();\n  page += 1;\n  })"],"names":["perPage","getImagesByQuery","query","page","myApiKey","BASE_URL","params","axios","list","loader","loadMore","ligthBox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","inputValue","totalPages","e","iziToast","data","cardHeight"],"mappings":"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"}